<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>任务管理界面</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h2>任务管理</h2>
        
        <!-- 任务列表 -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>任务名称</th>
                    <th>状态</th>
                    <th>上次执行时间</th>
                    <th>下次执行时间</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody id="task-list">
                <!-- 动态填充任务 -->
            </tbody>
        </table>
        
        <hr>

        <!-- 任务配置 -->
        <h3>任务配置</h3>
        <form id="task-form">
            <div class="mb-3">
                <label for="task-name" class="form-label">任务名称</label>
                <input type="text" class="form-control" id="task-name" required>
            </div>
            <div class="mb-3">
                <label for="cloud-dir" class="form-label">云盘目录</label>
                <input type="text" class="form-control" id="cloud-dir" required>
            </div>
            <div class="mb-3">
                <label for="mirror-dir" class="form-label">镜像目录</label>
                <input type="text" class="form-control" id="mirror-dir" required>
            </div>
            <div class="mb-3">
                <label for="cron-expression" class="form-label">定时执行</label>
                <input type="text" class="form-control" id="cron-expression" placeholder="如 0 12 * * *" required>
            </div>
            <div class="mb-3">
                <label for="real-time-monitor" class="form-label">实时监控</label>
                <select class="form-control" id="real-time-monitor">
                    <option value="true">启用</option>
                    <option value="false">禁用</option>
                </select>
            </div>
            
            <!-- 策略表格 -->
            <h4>策略配置</h4>
            <table class="table table-bordered" id="strategy-table">
                <thead>
                    <tr>
                        <th>策略名称</th>
                        <th>扩展名</th>
                        <th>生成方式</th>
                        <th>strm 前缀</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- 策略行 -->
                </tbody>
            </table>
            <button type="button" class="btn btn-success" id="add-strategy">新增策略</button>
            <br><br>
            <button type="submit" class="btn btn-primary">保存任务</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 动态添加策略行
        document.getElementById("add-strategy").addEventListener("click", function() {
            const tableBody = document.querySelector("#strategy-table tbody");
            const newRow = document.createElement("tr");

            newRow.innerHTML = `
                <td><input type="text" class="form-control" placeholder="策略名称"></td>
                <td><input type="text" class="form-control" placeholder="扩展名"></td>
                <td>
                    <select class="form-control">
                        <option value="ignore">忽略</option>
                        <option value="copy">复制</option>
                        <option value="symlink">软链接</option>
                        <option value="strm">strm</option>
                        <option value="0kb">0KB 文件</option>
                    </select>
                </td>
                <td><input type="text" class="form-control" placeholder="strm 前缀" disabled></td>
                <td>
                    <button type="button" class="btn btn-danger btn-sm" onclick="deleteStrategyRow(this)">删除</button>
                </td>
            `;

            tableBody.appendChild(newRow);
        });

        // 删除策略行
        function deleteStrategyRow(button) {
            const row = button.closest("tr");
            row.remove();
        }

        // 表单提交处理
        document.getElementById("task-form").addEventListener("submit", function(event) {
            event.preventDefault();
            // 处理任务保存
        });
    </script>
</body>
</html>
